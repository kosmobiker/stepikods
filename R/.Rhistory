setwd("~/stepikods/R")
data1 <- read.csv(url("http://stat.columbia.edu/~rachel/datasets/nyt1.csv"))
data1 <- read.csv(url("http://stat.columbia.edu/~rachel/datasets/nyt1.csv"))
data1 <- read.csv(url("http://stat.columbia.edu/~rachel/datasets/nyt1.csv"))
data1 <- read.csv(url("http://stat.columbia.edu/~rachel/datasets/nyt1.csv"))
View(data1)
#categorize
data1$age_group <- cut(data1$Age, c(0, 19, 24, 34, 44, 54, 64, +Inf))
View(data1)
#categorize
data1$age_group <- cut(data1$Age, c(-Inf, 19, 24, 34, 44, 54, 64, +Inf))
#categorize
data1$age_group <- cut(data1$Age, c(-Inf, 19, 24, 34, 44, 54, 64, +Inf),
labels = c("<18", "18–24", "25–34", "35-44", "45-54", "55-64", "65+"))
data1 <- read.csv("../data/dds_datasets/dds_ch2_nyt/nyt1.csv"))
data1 <- read.csv("../data/dds_datasets/dds_ch2_nyt/nyt1.csv")
#categorize
data1$age_group <- cut(data1$Age, c(-Inf, 19, 24, 34, 44, 54, 64, +Inf),
labels = c("<18", "18–24", "25–34", "35-44", "45-54", "55-64", "65+"))
View(data1)
View(data1)
summary(data1)
library(dplyr)
data11 %>% count(age_group)
data1 %>% count(age_group)
aggregate(data1, age_group, sum(data1$Impressions)/sum(data1$Clicks))
sum(data1$Impressions)
sum(data1$Clicks)
aggregate(data1, age_group, formula = sum(data1$Impressions)/sum(data1$Clicks))
group_by(data1, age_group) %>% mutate(ctr = sum(Impresions)/sum(Clicks))
group_by(data1, age_group) %>% summarise(ctr = sum(Impresions)/sum(Clicks))
group_by(data1, age_group) %>% summarise(ctr = sum(data1$Impresions)/sum(data1$Clicks))
group_by(data1, age_group) %>% mutate(ctr = sum(data1$Impresions)/sum(data1$Clicks))
data1 %>%
group_by(age_group)
data1 %>%
group_by(age_group) %>%
summarise()
data1 %>%
group_by(age_group) %>%
summarise(n)
data1 %>%
group_by(age_group) %>%
summarise(ctr, Impressions/Clicks)
data1 %>%
group_by(age_group) %>%
mutate(ctr, Impressions/Clicks)
data1 %>%
group_by(age_group) %>%
mutate(n = n())
data1 %>%
group_by(age_group) %>%
summarise(n = n())
data1 %>%
group_by(age_group) %>%
summarise(n)
data1 %>%
group_by(age_group) %>%
summarise(n = mean())
data1 %>%
group_by(age_group) %>%
summarise(n = mean(n))
data1 %>%
group_by(age_group) %>%
mutate(proportion = count/sum(count))
data1 %>%
group_by(age_group)
sum(data1$Clicks)
data1 %>%
group_by(age_group) %>%
summarise(Frequency = sum(Frequency))
data1 %>%
group_by(age_group) %>%
summarise(Impressions = sum(Impressions))
data1 %>%
group_by(age_group) %>%
summarise(Clicks = sum(Clicks))
a <- data1 %>%
group_by(age_group) %>%
summarise(Impressions = sum(Impressions))
b <- data1 %>%
group_by(age_group) %>%
summarise(Clicks = sum(Clicks))
a/b
b/a
a
b[1] / a[1]
b[2] / a[2]
data1 %>%
group_by(age_group) %>%
summarise(Clicks = sum(Clicks)) / summarise(Impressions = sum(Impressions))
data1 %>%
group_by(age_group) %>%
summarise(Clicks = sum(Clicks))
data1 %>%
group_by(age_group) %>%
summarise(CTR = quant[group=="Clicks"]/quant[group=="Impressions"])
structure(list(group = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L,
2L), .Label = c("case", "controls"), class = "factor"), treatment = structure(c(1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "EPA", class = "factor"),
replicate = structure(c(2L, 4L, 3L, 1L, 2L, 4L, 3L, 1L), .Label = c("four",
"one", "three", "two"), class = "factor"), fatty_acid_family = structure(c(1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "saturated", class = "factor"),
fatty_acid = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "14:0", class = "factor"),
quant = c(6.16, 6.415, 4.02, 4.05, 4.62, 4.435, 3.755, 3.755
)), .Names = c("group", "treatment", "replicate", "fatty_acid_family",
"fatty_acid", "quant"), class = "data.frame", row.names = c(NA,
-8L))
data1 %>%
group_by(age_group) %>%
summarise(lalal = Clicks)
data1 %>%
group_by(age_group) %>%
summarise(lalal = "Clicks")
data1 %>%
group_by(age_group) %>%
summarise(Clicks = sum(Clicks)/sum(Impressions))
data1 <- read.csv("../data/dds_datasets/dds_ch2_nyt/nyt1.csv")
#categorize
data1$age_group <- cut(data1$Age, c(-Inf, 19, 24, 34, 44, 54, 64, +Inf),
labels = c("<18", "18–24", "25–34", "35-44", "45-54", "55-64", "65+"))
summary(data1)
data1 %>%
group_by(age_group) %>%
summarise(CTR = sum(Clicks)/sum(Impressions))
summary(data1)
data1$Clicks > 0
data1[data1$Clicks > 0]
data1$Clicks[data1$Clicks > 0]
data1$Clicks[data1$Clicks == 0]
data1$Clicks[data1$Clicks == 1]
data1[data1$Clicks == 1]
source('~/stepikods/R/R_nyt_analisys.R', encoding = 'UTF-8')
source('~/stepikods/R/R_nyt_analisys.R', encoding = 'UTF-8')
library(dplyr)
library(dplyr)
data1 <- read.csv("../data/dds_datasets/dds_ch2_nyt/nyt1.csv")
#categorize
data1$age_group <- cut(data1$Age, c(-Inf, 19, 24, 34, 44, 54, 64, +Inf),
labels = c("<18", "18–24", "25–34", "35-44", "45-54", "55-64", "65+"))
summary(data1)
data1 %>%
group_by(age_group) %>%
summarise(CTR = sum(Clicks)/sum(Impressions))
library(ggplot2)
ggplot(data1, aes(x=Impressions, fill=age_group))+geom_histogram(binwidth=1)
ggplot(data1, aes(x=Impressions))+geom_histogram(binwidth=1)
a <- ggplot(data1, aes(x=Impressions, fill=age_group))+geom_histogram(binwidth=1)
print(a)
ggplot(data1, aes(x=Clicks, fill=age_group))+geom_histogram(binwidth=1)
ggplot(data1, aes(x=Impressions, fill=Gender))+geom_histogram(binwidth=1)
ggplot(data1, aes(x=Impressions, fill=Gender))+geom_histogram(binwidth=1)
ggplot(data1, aes(x=age_group, y=Impressions, fill=age_group))+geom_boxplot()
